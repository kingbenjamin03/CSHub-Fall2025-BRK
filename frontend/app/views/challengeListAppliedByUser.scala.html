@(challenges: List[Challenge],
        applicationStatuses: List[String],
        pageNum: Integer,
        offset: Integer,
        total: Integer,
        count: Integer,
        pageLimit: Integer,
        id: Long,
        beginIndexForPagination: Integer,
        endIndexForPagination: Integer)


@import helper._
@import models._
@import models.Challenge
@import scala.collection.immutable.Range

@scripts = {
    <script type="module" src='@routes.Assets.at("javascripts/voiceJump.js")'></script>
    <script type="text/javascript">
            $(document).ready(function () {
                $('.tooltipped').tooltip();
            });
    </script>
}

@main("My Applied Challenges", scripts) {
    <div class="container">
        <div class="card-panel center">
            <div class="row card-panel z-depth-0 project-zone-panel">
                <div class="col s12">
                    <h6 class="center tooltipped" data-position="bottom" data-tooltip="This list shows the Challenges you applied for.">
                        My Applied Challenges
                    </h6>
                </div>
            </div>

            @if(challenges.size() > 0) {
                <div class="col s12">
                    <h4>Challenge List</h4>
                </div>

                <div class="row">
                    <div class="col s6">
                        <h6 class="left">Showing results: @{offset + 1} to @{offset + count} of @total</h6>
                    </div>
                </div>

                <table class="centered responsive-table striped" id="appliedChallengeTable">
                    <thead>
                        <tr class="list-header" style="border-bottom: 1px solid;
                        !important;">
                            <th style="cursor: pointer;">Challenge Id</th>
                            <th style="cursor: pointer;">Challenge Title</th>
                            <th style="cursor: pointer;">Short Description</th>
                            <th style="cursor: pointer;">Status</th>
                            <th style="cursor: pointer;">Location</th>
                            <th style="cursor: pointer;">View Applications</th>

                        </tr>
                    </thead>
                    <tbody>
                    @for((entry, index) <- challenges.zipWithIndex if entry.getStatus() != "closed" ) {
                        <tr>
                            <td><a href = "@routes.ChallengeController.challengeDetail(entry.getId())">@entry.getId()</a></td>


@*                            @if(entry.getChallengeTitle() != "") {*@
@*                                <td><span class="@entry.getId() editable" data-name='title'></span>*@
@*                                    @entry.getChallengeTitle()*@
@*                                </td>*@
@*                            } else {*@
@*                                <td><span class="@entry.getId() editable" data-name='title'>&ensp; -</span></td>*@
@*                            }*@
                            <td>
                                <span class="@entry.getId() editable" data-name="challengeTitle"></span>
                                @if(entry.getChallengeTitle() != null && entry.getChallengeTitle().nonEmpty) {
@*                                    @if(entry.getChallengeTitle().length > 30) {*@
@*                                        @entry.getChallengeTitle().substring(0, 30)...*@
@*                                    } else {*@
@*                                        @entry.getChallengeTitle()*@
@*                                    }*@
                                    @entry.getChallengeTitle()
                                } else {
                                    <span class="@entry.getId() editable" data-name="challengeTitle">&ensp; -</span>
                                }
                            </td>


                            @*                            @if(entry.getShortDescription() != "") {*@
@*                                <td><span class="@entry.getId() editable" data-name='shortDescription'></span>*@

@*                                    @entry.getShortDescription()*@
@*                                </td>*@
@*                            } else {*@
@*                                <td><span class="@entry.getId() editable" data-name='shortDescription'>&ensp; -</span></td>*@
@*                            }*@
                            <td>
                                <span class="@entry.getId() editable" data-name="shortDescription"></span>
                                @if(entry.getShortDescription() != null && entry.getShortDescription().nonEmpty) {
@*                                    @if(entry.getShortDescription().length > 20) {*@
@*                                        @entry.getShortDescription().substring(0, 20)...*@
@*                                    } else {*@
@*                                        @entry.getShortDescription()*@
@*                                    }*@
                                    @entry.getShortDescription()
                                } else {
                                    <span class="@entry.getId() editable" data-name="shortDescription">&ensp; -</span>
                                }
                            </td>

@*                            @if(entry.getFields() != "") {*@
@*                                <td><span class="@entry.getId() editable" data-name='fields'></span>*@

@*                                    @entry.getFields()*@
@*                                </td>*@
@*                            } else {*@
@*                                <td><span class="@entry.getId() editable" data-name='fields'>&ensp; -</span></td>*@
@*                            }*@
@*                            <td>*@
@*                                <span class="@entry.getId() editable" data-name="fields"></span>*@
@*                                @if(entry.getFields() != null && entry.getFields().nonEmpty) {*@
@*                                    @if(entry.getFields().length > 20) {*@
@*                                        @entry.getFields().substring(0, 20)...*@
@*                                    } else {*@
@*                                        @entry.getFields()*@
@*                                    }*@
@*                                    @entry.getFields()*@
@*                                } else {*@
@*                                    <span class="@entry.getId() editable" data-name="fields">&ensp; -</span>*@
@*                                }*@
@*                            </td>*@

@*                            @if(entry.getStatus() == "open") {*@
@*                                <td>*@
@*                                    <span class="new badge light-green darken-1" data-badge-caption="open"></span>*@
@*                                </td>*@
@*                            } else if(entry.getStatus() == "pending"){*@
@*                            <td>*@
@*                                <span class="new badge purple darken-1" data-badge-caption="pending"></span>*@
@*                            </td>*@
@*                            }else{*@
@*                            <td>*@
@*                                <span class="new badge grey darken-3" data-badge-caption="closed"></span>*@
@*                            </td>*@
@*                            }*@
                            @if(entry.getStatus() == "closed") {
                                <td>
                                    <span class="new badge grey darken-3" data-badge-caption="closed"></span>
                                </td>
                            } else if(applicationStatuses(index) == "open") {
                            <td>
                                <span class="new badge light-green darken-1" data-badge-caption="open"></span>
                            </td>
                            } else if(applicationStatuses(index) == "pending") {
                            <td>
                                <span class="new badge purple darken-1" data-badge-caption="pending"></span>
                            </td>
                            } else {
                            <td>&ensp; -</td>
                            }




                            @if(entry.getLocation() != "") {
                                <td>
                                    <span class="@entry.getId() editable" data-name="location"></span>
                                    @entry.getLocation()
                                </td>
                            } else {
                                <td><span class="@entry.getId() editable" data-name="location"> -</span></td>
                            }



                            <td>
                                <a class="waves-effect waves-light green darken-3 btn" href="@routes.ChallengeController.challengeApplicationsDetail(entry.getId())">View </a>
                            </td>
                        </tr>
                    }
                    </tbody>
                </table>

                <div class="row">
                    <div class="col s12">
                        <ul class="pagination center-align">
                            @if(pageNum == 1) {
                                <li class="waves-effect disabled" style="color: #c3bfbf;"><i class="material-icons">
                                    first_page</i></li>
                                <li class="waves-effect disabled" style="color: #c3bfbf;"><i class="material-icons">
                                    chevron_left</i></li>
                            } else {
                                <li class="waves-effect"><a href="@routes.ChallengeController.challengeListAppliedByUser(1)"><i class="material-icons">
                                    first_page</i></a></li>
                                <li class="waves-effect"><a href="@routes.ChallengeController.challengeListAppliedByUser(pageNum - 1)"><i class="material-icons">
                                    chevron_left</i></a></li>
                            }
                            @if(beginIndexForPagination > 1) {
                                <li class="waves-effect modal-trigger" href="#allPageModal" style="cursor: pointer;
                                    font-size: 20px;
                                    font-weight: bold">...</li>
                            }
                            @for(i <- (beginIndexForPagination + 0) to (endIndexForPagination + 0)) {
                                <li @if(pageNum == i) {
                                    class="active"}><a href="@routes.ChallengeController.challengeListAppliedByUser(i)">@i</a></li>
                            }
                            @if(endIndexForPagination < ((total - 1) / pageLimit + 1)) {
                                <li class="waves-effect modal-trigger" href="#allPageModal" style="cursor: pointer;
                                    font-size: 20px;
                                    font-weight: bold">...</li>
                            }
                            @if((offset + count) >= total) {
                                <li class="waves-effect disabled" style="color: #c3bfbf;"><i class="material-icons">
                                    chevron_right</i></li>
                                <li class="waves-effect disabled" style="color: #c3bfbf;"><i class="material-icons">
                                    last_page</i></li>
                            } else {
                                <li class="waves-effect"><a href="@routes.ChallengeController.challengeListAppliedByUser(pageNum + 1)"><i class="material-icons">
                                    chevron_right</i></a></li>
                                <li class="waves-effect"><a href="@routes.ChallengeController.challengeListAppliedByUser((total - 1) / pageLimit + 1)"><i class="material-icons">
                                    last_page</i></a></li>
                            }
                        </ul>
                    </div>
                </div>
            } else {
                <h5>No Challenges applied yet.</h5>
            }
            <div id="allPageModal" class="modal">
                <div class="modal-content">
                    <h6>Select the page number you want to jump to</h6>
                    <div class="card z-depth-0">

                    @for(i <- (0) to ((((total - 1)/(pageLimit) + 1) - 1)/10)) {
                        <ul class="pagination center-align">
                        @for(j <- (i * 10 + 1) to (i * 10 + 10)) {
                            @if(j <= ((total - 1)/(pageLimit) + 1)) {
                                @if(j != pageNum) {
                                    <li class="waves-effect grey lighten-3"><a href='@routes.ChallengeController.challengeListAppliedByUser(j)'>@j</a></li>
                                }else{
                                    <li class="waves-effect active"><a href="@routes.ChallengeController.challengeListAppliedByUser(j)">@j</a></li>
                                }
                            }
                        }
                        </ul>
                    }
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="#!" class="modal-close waves-effect waves-green btn-flat">
                        Cancel</a>
                </div>
            </div>

            <div id="enrollPageModal" class="modal">
                <div class="modal-content">
                    <h6>Select the page number you want to jump to</h6>
                    <div class="card z-depth-0">

                    @for(i <- (0) to ((((total - 1)/(pageLimit) + 1) - 1)/10)) {
                        <ul class="pagination center-align">
                        @for(j <- (i * 10 + 1) to (i * 10 + 10)) {
                            @if(j <= ((total - 1)/(pageLimit) + 1)) {
                                @if(j != pageNum) {
                                    <li class="waves-effect grey lighten-3"><a href='@routes.ProjectController.getMyEnrolledProjects(j, "")'>@j</a></li>
                                }else{
                                    <li class="waves-effect active"><a href="@routes.ProjectController.getMyEnrolledProjects(j, "")">@j</a></li>
                                }
                            }
                        }
                        </ul>
                    }
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="#!" class="modal-close waves-effect waves-green btn-flat">
                        Cancel</a>
                </div>
            </div>

            <div id="searchPageModal" class="modal">
                <div class="modal-content">
                    <h6>Select the page number you want to jump to</h6>
                    <div class="card z-depth-0">

                    @for(i <- (0) to ((((total - 1)/(pageLimit) + 1) - 1)/10)) {
                        <ul class="pagination center-align">
                        @for(j <- (i * 10 + 1) to (i * 10 + 10)) {
                            @if(j <= ((total - 1)/(pageLimit) + 1)) {
                                @if(j != pageNum) {
                                    <li class="waves-effect grey lighten-3"><a href='#!' onclick="jumpToPage(@j)">@j</a></li>
                                }else{
                                    <li class="waves-effect active"><a href="#!" onclick="jumpToPage(@j)">@j</a></li>
                                }
                            }
                        }
                        </ul>
                    }
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="#!" class="modal-close waves-effect waves-green btn-flat">
                        Cancel</a>
                </div>
            </div>

        </div>
    </div>
}
